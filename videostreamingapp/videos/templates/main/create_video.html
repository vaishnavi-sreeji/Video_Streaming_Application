{% extends 'main/base.html' %}
{% block title %}Video{% endblock %}
{% block content %}
<section class="container">
    <div class="row mb-3">
        <div class="col-md-6">
            <h1> List of Videos</h1>
        </div>
        <div class="col-md-6 text-end">
            <button class="btn btn-primary" onclick="showForm()">Add Video</button>
        </div>
    </div>
    <form method="GET" action="" class="mb-3">
        <div class="input-group">
            <input type="text" name="search" id="search" class="form-control" placeholder="Search video name,url" value="{{ request.GET.search }}">
            <button type="submit" class="btn btn-primary">Search</button>
            <button type="submit" class="btn btn-secondary"  onclick="clearSearch()">Clear</button>
        </div>
    </form>
    

    <div id="prop" class="d-none">
        <form method="post">
            {% csrf_token %}
            <table class="table">
                <tr>
                    <td><label for="name">Name:</label></td>
                    <td><input id="name" type="text" name="name" class="form-control"></td>
                </tr>
                <tr>
                    <td><label for="video_url">video_url:</label></td>
                    <td><textarea id="video_url" name="video_url" class="form-control"></textarea></td>
                </tr>
                
                
            </table>
            <input type="submit" value="Add video" class="btn btn-outline-primary mb-3">
        </form>
    </div>
    
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Video Name</th>
                    <th>Video_url</th>
                    
                </tr>
            </thead>
            <tbody>
                {% for i in datas %}
                <tr>
                    <td>{{ i.name }}</td>
                    <td>{{ i.video_url }}</td>
                    
                    <td>
                        <a href="/videos?video_id={{ i.id }}" class="btn btn-success">Play_Video</a>
                        <a href="update_video?video_id={{ i.id }}" class="btn btn-primary">Update_Video</a>
                        <a href="delete_video?video_id={{ i.id }}" class="btn btn-danger">Delete_Video</a>
                        
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>
<script>
    const showForm = () => document.getElementById("prop").classList.remove('d-none');
    
    
    const clearSearch = () => {
        document.getElementById('search').value = '';
        const VideoForm = document.getElementById('video-form'); // Change 'tenant-form' to the ID of the form in your tenant page
        if (videoForm) {
            videoForm.submit();
        }
    };
</script>

    

{% endblock %}
